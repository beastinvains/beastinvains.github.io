---
layout: post
title: "üõ°Ô∏è Malware Analysis Lab Setup Guide"
categories: analysis
description: "A complete beginner-friendly guide to building a safe, isolated malware analysis lab using VMware, FLARE VM, and REMnux. Includes network setup, INetSim configuration, and fake internet simulation."
tags: [malware_analysis,]
---

<br>

A malware analysis lab allows you to safely study malware behaviour inside an isolated environment without risking your real machine or network.  
This guide walks you through setting up a complete lab using:

- **FLARE VM** (Windows malware analysis platform)  
- **REMnux** (Linux reverse-engineering distro)  
- **INetSim / FakeDNS** for fake internet responses  
- **VMware / VirtualBox** isolated networks  

All steps include screenshots from my own setup.

---

# üß∞ Requirements

Before you begin, ensure you have:

- **70+ GB disk space** for FLARE VM  
- **8 GB RAM minimum** (16 GB recommended)  
- A system capable of running 2‚Äì3 VMs  
- Basic understanding of VMs  
- Patience ‚Äî FLARE VM installation takes hours  

---

# üì• Files You Need to Download

1. Windows ISO  
2. VMware Workstation or [VirtualBox][vsbox]  
3. REMnux `.ova` appliance  
4. FLARE VM install script  

[vsbox]: https://www.virtualbox.org/  
[rem]: https://docs.remnux.org/install-distro/get-virtual-appliance  
[flare]: https://github.com/mandiant/flare-vm  

---


# ü™ü Setting Up FLARE VM (Windows)

## Step 1: Download the Installer

Open **PowerShell as Administrator** and run:

<img src="/assets/blog_image/malware_lab/flarevm2.png"  
style="width: 520px; height: auto;">

```powershell
(new-object net.webclient).DownloadFile(
'https://raw.githubusercontent.com/mandiant/flare-vm/master/install.ps1',
"$([Environment]::GetFolderPath('Desktop'))\install.ps1"
)

Unblock-File .\install.ps1
Set-ExecutionPolicy Unrestricted -Force

.\install.ps1
Step 2: Choose Your Packages
After running the installer, FLARE VM will show a package selection screen:
```
<img src="/assets/blog_image/malware_lab/flarevm3.png" style="width: 520px; height: auto;">

### Click Install.
<mark style = "background-color: #FF6347;">‚ö†Ô∏è Note: Installation takes many hours (sometimes 6‚Äì12 hours).
Your VM will reboot many times ‚Äî this is completely normal.</mark>

## setting W.S
turn off windows defender firewall in both dir.

<img src="/assets/blog_image/malware_lab/security.png" style="width: 900px; height: auto;">
and enable [turn off windows antivirus]

<img src="/assets/blog_image/malware_lab/security2.png" style="width: 800px; height: auto;">

### network setup
<img src="/assets/blog_image/malware_lab/Screenshot_2025-12-08_19-38-59.png" style="width: 400px; height: auto;">
<img src="/assets/blog_image/malware_lab/Screenshot_2025-12-08_19-36-40.png" style="width: 400px; height: auto;">
# üåê Network Setup (Virtual Machines)

This part is extremely important because malware MUST NEVER touch your real network.

You will configure a Host-Only network, meaning:

- [x] Malware cannot access the internet
- [x] FLARE VM ‚Üî REMnux can communicate privately
- [x] INetSim can simulate fake internet services

## üñ•Ô∏è Network Setup (VirtualBox)
Step 1: Open VirtualBox Network Manager

<img src="/assets/blog_image/malware_lab/network1.png" style="width: 420px; height: auto;">

Step 2: Create Host-Only Network

<img src="/assets/blog_image/malware_lab/network2.png" style="width: 450px; height: auto;">

Use:

IPv4 Address: 10.0.0.1

Subnet Mask: 255.255.255.0

Step 3: Configure DHCP

<img src="/assets/blog_image/malware_lab/network3.png" style="width: 520px; height: auto;">
```
Use:
nginx 
Copy code 
Server Address: 10.0.0.2 
Server Mask:    255.255.255.0 
Lower Bound:    10.0.0.3 
Upper Bound:    10.0.0.254 
```
### üñ•Ô∏è Network Setup (VMware Workstation)
Step 1: Open Virtual Network Editor
Go to:

Copy code
Edit ‚Üí Virtual Network Editor
<img src="/assets/blog_image/malware_lab/Capture.PNG" style="width: 720px; height: auto;">

Step 2: Create a Host-Only Network (VMnet3 recommended)
Use:

``` nginx
Subnet IP:     10.0.0.0
Subnet Mask:   255.255.255.0
DHCP enabled 
VMware automatically assigns .1 and .2, so you don't need to set server IP manually.
starting ip add: 10.0.0.3
ending ip add: 10.0.0.254
```
# üêß Installing REMnux
Open Import Appliance in VMware or VirtualBox

Select the remnux.ova file

Choose storage location

Start the VM
<img src="/assets/blog_image/malware_lab/rumnux1.png" style="width: 800px; height: auto;">
## setting network 
``` 
cd /etc/inetsim
sudo nano inetsim.conf
```
<img src="/assets/blog_image/malware_lab/remnux2.png" style="width: 400px; height: auto;">
<img src="/assets/blog_image/malware_lab/remnux3.png" style="width: 400px; height: auto;">
<img src="/assets/blog_image/malware_lab/remnux4.png" style="width: 400px; height: auto;">

# üéâ Your Malware Analysis Lab Is Ready!

You now have:

- [x] FLARE VM fully installed
- [x] REMnux imported and configured
- [x] Host-only isolated network
- [x] Fake internet simulation (INetSim + FakeDNS)
- [x] Safe environment for analyzing malware

You can now begin:
```
Static malware analysis

Dynamic analysis

Network traffic monitoring

Behavioural analysis
```